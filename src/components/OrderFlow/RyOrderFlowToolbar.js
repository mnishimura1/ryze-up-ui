import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { useStore } from '../../lib/store';
import Card from '../Card';
export const RyOrderFlowToolbar = () => {
    const { flow } = useStore();
    const [timeframe, setTimeframe] = useState('5m');
    const [smoothing, setSmoothing] = useState(0.3);
    const [aggressorFilter, setAggressorFilter] = useState('all');
    const [minSize, setMinSize] = useState(1000);
    const timeframeLabels = {
        '1m': '1 Minute',
        '5m': '5 Minutes',
        '15m': '15 Minutes',
        '1h': '1 Hour',
    };
    // Get real aggressor stats from store
    const aggressorStats = flow?.aggressor_stats || { all: null, buy: null, sell: null };
    const stats = aggressorStats[aggressorFilter];
    if (!stats) {
        return null;
    }
    return (_jsx(Card, { children: _jsxs("div", { className: "p-6", children: [_jsx("h3", { className: "text-lg font-semibold mb-4", children: "OrderFlow Toolbar" }), _jsxs("div", { className: "grid grid-cols-2 gap-4 mb-6", children: [_jsxs("div", { children: [_jsx("label", { className: "text-xs font-semibold text-dark-text/70 block mb-2", children: "Timeframe" }), _jsx("div", { className: "grid grid-cols-4 gap-2", children: ['1m', '5m', '15m', '1h'].map((tf) => (_jsx("button", { onClick: () => setTimeframe(tf), className: `px-2 py-1 rounded text-xs font-semibold transition ${timeframe === tf
                                            ? 'bg-accent text-dark-bg'
                                            : 'bg-dark-border/50 text-dark-text/70 hover:bg-dark-border'}`, children: tf }, tf))) })] }), _jsxs("div", { children: [_jsxs("label", { className: "text-xs font-semibold text-dark-text/70 block mb-2", children: ["Smoothing (EMA): ", (smoothing * 100).toFixed(0), "%"] }), _jsxs("div", { className: "flex items-center space-x-3", children: [_jsx("input", { type: "range", min: "0", max: "1", step: "0.05", value: smoothing, onChange: (e) => setSmoothing(+e.target.value), className: "flex-1" }), _jsxs("span", { className: "text-xs font-mono w-8 text-right text-dark-text/70", children: [(smoothing * 100).toFixed(0), "%"] })] })] })] }), _jsxs("div", { className: "grid grid-cols-2 gap-4 mb-6", children: [_jsxs("div", { children: [_jsx("label", { className: "text-xs font-semibold text-dark-text/70 block mb-2", children: "Aggressor Filter" }), _jsx("div", { className: "grid grid-cols-3 gap-2", children: ['all', 'buy', 'sell'].map((filter) => (_jsx("button", { onClick: () => setAggressorFilter(filter), className: `px-2 py-1 rounded text-xs font-semibold transition ${aggressorFilter === filter
                                            ? 'bg-accent text-dark-bg'
                                            : 'bg-dark-border/50 text-dark-text/70 hover:bg-dark-border'}`, children: filter === 'all' ? 'All' : filter === 'buy' ? 'ðŸ“ˆ Buy' : 'ðŸ“‰ Sell' }, filter))) })] }), _jsxs("div", { children: [_jsxs("label", { className: "text-xs font-semibold text-dark-text/70 block mb-2", children: ["Min Size: $", (minSize / 1000).toFixed(0), "k"] }), _jsxs("div", { className: "flex items-center space-x-3", children: [_jsx("input", { type: "range", min: "100", max: "10000", step: "100", value: minSize, onChange: (e) => setMinSize(+e.target.value), className: "flex-1" }), _jsxs("span", { className: "text-xs font-mono w-12 text-right text-dark-text/70", children: ["$", (minSize / 1000).toFixed(1), "k"] })] })] })] }), _jsxs("div", { className: "grid grid-cols-3 gap-3 p-4 bg-dark-bg rounded border border-dark-border/50 mb-4", children: [_jsxs("div", { children: [_jsx("div", { className: "text-xs text-dark-text/70 mb-1", children: "Aggressive Buys" }), _jsx("div", { className: "text-lg font-bold text-success", children: stats.buys.toLocaleString() })] }), _jsxs("div", { children: [_jsx("div", { className: "text-xs text-dark-text/70 mb-1", children: "Aggressive Sells" }), _jsx("div", { className: "text-lg font-bold text-danger", children: stats.sells.toLocaleString() })] }), _jsxs("div", { children: [_jsx("div", { className: "text-xs text-dark-text/70 mb-1", children: "Buy/Sell Ratio" }), _jsxs("div", { className: `text-lg font-bold ${stats.ratio > 1.02 ? 'text-success' : stats.ratio < 0.98 ? 'text-danger' : 'text-warn'}`, children: [stats.ratio.toFixed(2), "x"] })] })] }), _jsxs("div", { className: "space-y-3 mb-4", children: [_jsxs("div", { children: [_jsxs("div", { className: "flex justify-between items-center mb-1 text-xs", children: [_jsx("span", { className: "font-semibold text-success", children: "Buy Flow" }), _jsxs("span", { className: "text-dark-text/70", children: [((stats.buys / (stats.buys + stats.sells)) * 100).toFixed(1), "%"] })] }), _jsx("div", { className: "w-full h-2 bg-dark-border rounded-full overflow-hidden", children: _jsx("div", { className: "h-full bg-success transition-all", style: { width: `${(stats.buys / (stats.buys + stats.sells)) * 100}%` } }) })] }), _jsxs("div", { children: [_jsxs("div", { className: "flex justify-between items-center mb-1 text-xs", children: [_jsx("span", { className: "font-semibold text-danger", children: "Sell Flow" }), _jsxs("span", { className: "text-dark-text/70", children: [((stats.sells / (stats.buys + stats.sells)) * 100).toFixed(1), "%"] })] }), _jsx("div", { className: "w-full h-2 bg-dark-border rounded-full overflow-hidden", children: _jsx("div", { className: "h-full bg-danger transition-all", style: { width: `${(stats.sells / (stats.buys + stats.sells)) * 100}%` } }) })] })] }), _jsxs("div", { className: "flex space-x-2", children: [_jsx("button", { className: "flex-1 px-3 py-2 rounded text-sm font-semibold bg-accent text-dark-bg hover:bg-accent/90 transition", children: "Apply Filters" }), _jsx("button", { className: "flex-1 px-3 py-2 rounded text-sm font-semibold bg-dark-border text-dark-text hover:bg-dark-border/80 transition", children: "Export Data" }), _jsx("button", { className: "flex-1 px-3 py-2 rounded text-sm font-semibold bg-dark-border text-dark-text hover:bg-dark-border/80 transition", children: "Reset" })] }), _jsxs("div", { className: "mt-4 text-xs text-dark-text/50 text-center", children: ["Updated: ", Math.round(Math.random() * 100), "ms ago"] })] }) }));
};
