import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useState } from 'react';
import { useStore } from '../../lib/store';
import Card from '../Card';
export default function Swap() {
    const [tokenA, setTokenA] = useState('ETH');
    const [tokenB, setTokenB] = useState('USDC');
    const [amountA, setAmountA] = useState(1);
    const [slippage, setSlippage] = useState(0.5);
    const { portfolio, safety } = useStore();
    const balanceA = portfolio.balances?.find(b => b.symbol === tokenA)?.usdValue || 0;
    const balanceB = portfolio.balances?.find(b => b.symbol === tokenB)?.usdValue || 0;
    const estimatedOutput = amountA * 2500 * (1 - slippage / 100);
    const priceImpact = slippage;
    return (_jsxs("div", { className: "p-8", children: [_jsx("h1", { className: "text-3xl font-bold mb-8", children: "Swap" }), _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [_jsx(Card, { children: _jsxs("div", { className: "p-6", children: [_jsx("h2", { className: "text-xl font-semibold mb-4", children: "Swap Tokens" }), _jsxs("div", { className: "mb-4", children: [_jsx("label", { className: "text-sm text-dark-text/70 mb-2 block", children: "From" }), _jsxs("select", { value: tokenA, onChange: (e) => setTokenA(e.target.value), className: "w-full px-3 py-2 border border-dark-border rounded", children: [_jsx("option", { children: "ETH" }), _jsx("option", { children: "BTC" }), _jsx("option", { children: "USDC" })] }), _jsxs("div", { className: "text-xs text-dark-text/70 mt-2", children: ["Balance: ", balanceA.toFixed(4)] })] }), _jsx("div", { className: "mb-4", children: _jsx("input", { type: "number", value: amountA, onChange: (e) => setAmountA(+e.target.value), placeholder: "Amount", className: "w-full px-3 py-2 border border-dark-border rounded" }) }), _jsx("button", { className: "w-full py-2 bg-accent text-dark-bg rounded mb-4", children: "\u2194 Swap" }), _jsxs("div", { className: "mb-4", children: [_jsx("label", { className: "text-sm text-dark-text/70 mb-2 block", children: "To" }), _jsxs("select", { value: tokenB, onChange: (e) => setTokenB(e.target.value), className: "w-full px-3 py-2 border border-dark-border rounded", children: [_jsx("option", { children: "USDC" }), _jsx("option", { children: "ETH" }), _jsx("option", { children: "BTC" })] }), _jsxs("div", { className: "text-xs text-dark-text/70 mt-2", children: ["Balance: ", balanceB.toFixed(4)] })] })] }) }), _jsx("div", { className: "space-y-4", children: _jsx(Card, { children: _jsxs("div", { className: "p-6", children: [_jsx("h3", { className: "text-lg font-semibold mb-4", children: "Route Preview" }), _jsxs("div", { className: "text-sm mb-3", children: [tokenA, " \u2192 Uniswap V3 \u2192 ", tokenB] }), _jsx("div", { className: "text-xs text-dark-text/70 mb-3", children: "Gas: ~150,000 units" }), _jsx("h4", { className: "text-sm font-semibold mb-3", children: "Price Impact & Slippage" }), _jsx("input", { type: "range", min: "0", max: "5", step: "0.1", value: slippage, onChange: (e) => setSlippage(+e.target.value), className: "w-full mb-2" }), _jsxs("div", { className: "text-xs", children: ["Slippage: ", slippage, "%"] }), _jsxs("div", { className: "text-xs text-dark-text/70 mt-2", children: ["Price Impact: ", priceImpact, "%"] }), priceImpact > 5 && _jsx("div", { className: "text-xs text-red-400 mt-2", children: "\u26A0\uFE0F High impact (>5%)" }), _jsxs("div", { className: "mt-4 p-3 bg-dark-bg rounded text-sm", children: [_jsxs("div", { children: ["Output: ~", estimatedOutput.toFixed(2), " ", tokenB] }), _jsxs("div", { className: "text-xs text-dark-text/70 mt-1", children: ["Min Receive: ", (estimatedOutput * 0.995).toFixed(2), " ", tokenB] })] }), _jsx("button", { className: `w-full py-2 rounded mt-4 text-white font-semibold ${safety.routing ? 'bg-accent' : 'bg-dark-border opacity-50 cursor-not-allowed'}`, disabled: !safety.routing, children: safety.routing ? 'Approve & Swap' : 'Routing Disabled' }), !safety.routing && _jsx("div", { className: "text-danger text-center py-1 bg-danger/10 rounded mt-2 text-xs", children: "Routing Disabled (Sandbox Mode)" })] }) }) })] })] }));
}
